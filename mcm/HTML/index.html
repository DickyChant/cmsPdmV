<!DOCTYPE html>
<html lang="eng" ng-app="testApp" xmlns:ng="http://angularjs.org" id="ng-app">
<head>
  <title>McM</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link href="scripts/bootstrap/css/bootstrap.min.css" rel="stylesheet">
       
  <script type="text/javascript" src="scripts/underscore.js"></script>
  <script type="text/javascript" src="scripts/angular.min.js"></script>
  <!--[IF IE]>
    <script type="text/javascript">
      var testApp = angular.module('testApp', []).config(function($locationProvider){$locationProvider.html5Mode(false);});
    </script>
  <![endif]-->
  <![if !IE]>
    <script type="text/javascript">
      var testApp = angular.module('testApp', []).config(function($locationProvider){$locationProvider.html5Mode(false);});
    </script>
  <![endif]>

  <script type="text/javascript">
  
  function resultsCtrl($scope,$http,$location){
    $scope.selectedDB = "------";
    $scope.possibleDBs = ["requests","flows","chained_campaigns","actions","users","campaigns","batches","chained_requests"];
    $scope.user = {name: "", role:"", roleIndex:0};
    // GET username and role
    var promise = $http.get("restapi/users/get_roles");
    promise.then(function(data){
      $scope.user.name = data.data.username;
      $scope.user.role = data.data.roles[0];
    }, function(data){
      alert("Error getting user information. Error: "+data.status);
    });
    var promise = $http.get("restapi/users/get_all_roles");
    promise.then(function(data){
      $scope.all_roles = data.data;
    },function(data){
      alert("Error getting user information. Error: "+data.status);
    });
    // Endo of user info request
    $scope.role = function(priority){
      if(priority > _.indexOf($scope.all_roles, $scope.user.role)){ //if user.priority < button priority then hide=true
        return true;
      }else{
        return false;
      }
    };
  };
  </script>
</head>
<body ng-controller="resultsCtrl">
  <div ng-include="'HTML/navbar_template.html'"></div>
  <div class="container">
    <div align="middle">
      <h2>McM Home page - Beta version</h2>
      <p> Updated to use HTML5 links: exclude <b>#</b> from URL's </p>
    </div>
<!--  <span>
    <select ng-model="selectedDB" ng-options="value for value in possibleDBs"></select>
    <input type"text" nd-model="search_query" class="input-xlarge">
  </span>-->
  </div><!--End of container -->
</body>
