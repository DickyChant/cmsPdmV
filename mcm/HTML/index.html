<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="eng" ng-app="testApp">
<head>
  <title>McM</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link href="scripts/bootstrap/css/bootstrap.min.css" rel="stylesheet">
       
  <script type="text/javascript" src="scripts/underscore.js"></script>
  <script type="text/javascript" src="scripts/angular.min.js"></script>
  <script type="text/javascript">
  var testApp = angular.module('testApp', []).config(function($locationProvider){$locationProvider.html5Mode(true);});
  function resultsCtrl($scope,$http,$location){
    $scope.user = {name: "", role:""}
    // GET username and role
    var promise = $http.get("restapi/users/get_roles");
    promise.then(function(data){
      $scope.user.name = data.data.username;
      $scope.user.role = data.data.roles[0];
    }, function(data){
      alert("Error getting user information. Error: "+data.status);
    });
    var promise = $http.get("restapi/users/get_all_roles");
    promise.then(function(data){
      $scope.all_roles = data.data;
    },function(data){
      alert("Error getting user information. Error: "+data.status);
    });
    // Endo of user info request
    $scope.role = function(priority){
      if(priority > _.indexOf($scope.all_roles, $scope.user.role)){ //if user.priority < button priority then hide=true
        return true;
      }else{
        return false;
      }
    };
  };
  </script>
</head>
<body ng-controller="resultsCtrl">
  <div ng-include="'HTML/navbar_template.html'"></div>
  <div class="container">
    <div align="middle">
      <h2>McM Home page - Beta version</h2>
      <p> <font color="green">Cool</font> <b>stuff</b> hapens here</p>
      <p> Updated to use HTML5 links: exclude <b>#</b> from URL's </p>
    </div>
  </div><!--End of container -->
</body>
